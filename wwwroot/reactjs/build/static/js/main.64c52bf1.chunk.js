(this["webpackJsonpreact-bootstrap"]=this["webpackJsonpreact-bootstrap"]||[]).push([[0],{25:function(e){e.exports=JSON.parse('{"status":"success","data":[]}')},31:function(e,t,a){e.exports=a(42)},36:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){"use strict";a.r(t);var i=a(0),s=a.n(i),n=a(9),l=a.n(n),r=(a(36),a(13)),o=a(10),c=a(17),d=a(14),m=a(16),h=a(23),u=a(11),v=a.n(u),p=a(5),b=a(25),f=a(44),y=a(45),T=function(e){function t(e,a){var i;return Object(r.a)(this,t),(i=Object(c.a)(this,Object(d.a)(t).call(this,e,a))).handleShow=i.handleShow.bind(Object(p.a)(i)),i.handleClose=i.handleClose.bind(Object(p.a)(i)),i.handleEndTimeChange=i.handleEndTimeChange.bind(Object(p.a)(i)),i.handleStartTimeChange=i.handleStartTimeChange.bind(Object(p.a)(i)),i.generateAvailableTimesListDivs=i.generateAvailableTimesListDivs.bind(Object(p.a)(i)),i.state={startTime:"",oldStartTime:"",endTime:"",oldEndTime:"",show:!1,day:e.date.split("-")[2],style:i.props.isToday?{backgroundColor:"#EAEAEA"}:{}},setTimeout((function(){i.generateAvailableTimesListDivs()}),200),i}return Object(m.a)(t,e),Object(o.a)(t,[{key:"generateAvailableTimesListDivs",value:function(){for(var e=[],t=0;t<this.props.availableTimesList.length;++t){if(2===t){e.push(s.a.createElement("div",{key:this.props.availableTimesList[t].starttime,className:"text-center"},"..."));break}var a=this.props.availableTimesList[t].starttime.split(" ")[1].split(":"),i=a[0]+":"+a[1],n=this.props.availableTimesList[t].endtime.split(" ")[1].split(":"),l=n[0]+":"+n[1];e.push(s.a.createElement("div",{key:this.props.availableTimesList[t].starttime,className:this.props.availableTimesList[t].className},i," -- ",l))}return s.a.createElement(s.a.Fragment,null,this.props.date.split("-")[2],e)}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(e.date!==t.date||e.availableTimesList!==t.availableTimesList){if(e.availableTimesList.length<1)return{startTime:"",endTime:"",date:e.date,availableTimesList:e.availableTimesList};var a=e.availableTimesList[0].starttime.split(" ")[1].split(":"),i=a[0]+":"+a[1],s=e.availableTimesList[0].endtime.split(" ")[1].split(":"),n=s[0]+":"+s[1];return{startTime:i,endTime:n,oldStartTime:i,oldEndTime:n,date:e.date,availableTimesList:e.availableTimesList}}return t}}]),Object(o.a)(t,[{key:"handleStartTimeChange",value:function(e){this.setState({startTime:e.target.value})}},{key:"handleEndTimeChange",value:function(e){this.setState({endTime:e.target.value})}},{key:"updateDay",value:function(){if(this.state.startTime&&this.state.endTime){var e=-1;this.props.availableTimesList.length>0&&(e=this.props.availableTimesList[0].id),this.props.updateAvailableTime(this.props.index,e,this.state.startTime,this.state.endTime)}}},{key:"cancelInput",value:function(){var e=this;setTimeout((function(){e.setState({startTime:e.state.oldStartTime,endTime:e.state.oldEndTime})}),500)}},{key:"handleClose",value:function(){this.setState({show:!1})}},{key:"handleShow",value:function(){this.setState({show:!0})}},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement("li",{className:this.props.selectedMonth?"outside":"inside",style:this.props.isToday?{backgroundColor:"#EAEAEA"}:{},key:this.props.date,onClick:this.handleShow},s.a.createElement("div",{className:"date"},this.generateAvailableTimesListDivs())),s.a.createElement(f.a,{show:this.state.show,onHide:function(){e.handleClose(),e.cancelInput()}},s.a.createElement(f.a.Header,{closeButton:!0},s.a.createElement(f.a.Title,{id:"modalTitle"},this.props.date," ",this.state.date)),s.a.createElement(f.a.Body,null,s.a.createElement("h3",null,"Add Available Time"),s.a.createElement("p",null,"Start Time:\xa0",s.a.createElement("input",{type:"text",key:"start"+this.props.date,value:this.state.startTime,onChange:this.handleStartTimeChange})),s.a.createElement("p",null,"\xa0End Time:\xa0",s.a.createElement("input",{type:"text",key:"end"+this.props.date,value:this.state.endTime,onChange:this.handleEndTimeChange}))),s.a.createElement(f.a.Footer,null,s.a.createElement(y.a,{variant:"secondary",onClick:function(){e.handleClose(),e.cancelInput()}},"Close"),s.a.createElement(y.a,{variant:"primary",onClick:function(){e.handleClose(),e.updateDay()}},"Add Available"))))}}]),t}(i.Component),g=new Array(11);function O(e,t){return new Date(t,e,0).getDate()}g[0]="Jan",g[1]="Feb",g[2]="Mar",g[3]="Apr",g[4]="May",g[5]="June",g[6]="July",g[7]="Aug",g[8]="Sept",g[9]="Oct",g[10]="Nov",g[11]="Dec";var D=function(e){function t(e,a){var i;Object(r.a)(this,t),(i=Object(c.a)(this,Object(d.a)(t).call(this,e,a))).prevMonth=i.prevMonth.bind(Object(p.a)(i)),i.nextMonth=i.nextMonth.bind(Object(p.a)(i)),i.generateCalendarDates=i.generateCalendarDates.bind(Object(p.a)(i)),i.generateCalendarDisplay=i.generateCalendarDisplay.bind(Object(p.a)(i)),i.updateAvailableTime=i.updateAvailableTime.bind(Object(p.a)(i)),i.getUrlVars=i.getUrlVars.bind(Object(p.a)(i));var s=new Date,n=new Date(s.getFullYear(),s.getMonth(),"1"),l=b.data;console.log("construct calendar"),i.state={firstDayOfMonth:n,availableTimesList:l};var o=i.generateCalendarDates();i.state={submitAvailableTimes:i.props.sendAvailableTimes,dayObjectArray:o,firstDayOfMonth:n};var m=i.generateCalendarDisplay();i.state={submitAvailableTimes:i.props.sendAvailableTimes,dayObjectArray:o,firstDayOfMonth:n,calendarDisplay:m,availableTimesList:l,calendarDescription:"Calendar 1"};var h=i.getUrlVars().calendarId;return"undefined"!==typeof h&&null!==h&&i.fetchAvailableTimesList(),i}return Object(m.a)(t,e),Object(o.a)(t,[{key:"fetchAvailableTimesList",value:function(){var e,t,a,i=this;return v.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return e=this.getUrlVars().calendarId,console.log("calendarId="+e),s.next=4,v.a.awrap(fetch("/Calendar/AvailableTimesJSON?calendarId="+e));case 4:return t=s.sent,s.next=7,v.a.awrap(t.json());case 7:a=s.sent,console.log(a),this.setState({availableTimesList:a.data,calendarDescription:a.description,calendarId:e}),setTimeout((function(){var e=i.generateCalendarDates();i.setState({dayObjectArray:e})}),200),setTimeout((function(){var e=i.generateCalendarDisplay();i.setState({calendarDisplay:e})}),200);case 12:case"end":return s.stop()}}),null,this)}},{key:"getUrlVars",value:function(){var e={};return window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,(function(t,a,i){e[a]=i})),e}},{key:"generateCalendarDisplay",value:function(){console.log("gen cal");for(var e=[],t=0;t<this.state.dayObjectArray.length;++t)e.push(s.a.createElement(T,{key:t,index:t,date:this.state.dayObjectArray[t].date,selectedMonth:this.state.dayObjectArray[t].selectedMonth,isToday:this.state.dayObjectArray[t].isToday,availableTimesList:this.state.dayObjectArray[t].availableTimesList,updateAvailableTime:this.updateAvailableTime.bind(this)}));return e}},{key:"generateCalendarDates",value:function(){var e=this,t=this.state.firstDayOfMonth.getMonth(),a=this.state.firstDayOfMonth.getFullYear();t<1&&(t=12,a-=1);var i=O(t,a),s=O(this.state.firstDayOfMonth.getMonth()+1,this.state.firstDayOfMonth.getFullYear()),n=this.state.firstDayOfMonth.getDay(),l=i-n,r=this.state.availableTimesList;r.map((function(e,t){if("undefined"===typeof e.date){var a=e.starttime.split("-"),i=a[2].split(" ")[0];e.date=a[0]+"-"+a[1]+"-"+i}return"undefined"===typeof e.className&&(e.className="event bg-info"),null}));var o=new Date;o.setHours(0,0,0,0);for(var c=new Array(42),d=function(){h=e.state.firstDayOfMonth.getMonth(),u=e.state.firstDayOfMonth.getFullYear(),v=!1,p=0,b=!1,l+m<i?(u=11===(h=h-1<0?11:h-1)?u-1:u,v=!0,p=l+m+1,new Date(u,h,p).getTime()===o.getTime()&&(b=!0)):m-n+1<=s?(p=m-n+1,new Date(u,h,p).getTime()===o.getTime()&&(b=!0)):(u=0===(h=h+1>11?0:h+1)?u+1:u,p=m-n-s+1,v=!0,new Date(u,h,p).getTime()===o.getTime()&&(b=!0));var t=m,a=u+"-";h<10&&(a+="0"),a+=h+1+"-",p<10&&(a+="0"),a+=p,c[t]={},c[t].selectedMonth=v,c[t].date=a,c[t].isToday=b,c[t].availableTimesList=[],r.map((function(e,i){return a===e.date&&c[t].availableTimesList.push(e),null}))},m=0;m<42;++m){var h,u,v,p,b;d()}return c}},{key:"prevMonth",value:function(){var e=this,t=this.state.firstDayOfMonth,a=new Date(t.getFullYear(),t.getMonth()-1,"1");console.log(t),console.log(a),this.setState({firstDayOfMonth:a}),setTimeout((function(){var t=e.generateCalendarDates();e.setState({dayObjectArray:t})}),200),setTimeout((function(){var t=e.generateCalendarDisplay();e.setState({calendarDisplay:t})}),200)}},{key:"nextMonth",value:function(){var e=this,t=this.state.firstDayOfMonth,a=new Date(t.getFullYear(),t.getMonth()+1,"1");console.log(t),console.log(a),this.setState({firstDayOfMonth:a}),setTimeout((function(){var t=e.generateCalendarDates();e.setState({dayObjectArray:t})}),200),setTimeout((function(){var t=e.generateCalendarDisplay();e.setState({calendarDisplay:t})}),200)}},{key:"postAvailableTimes",value:function(){var e,t,a,i;return v.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:e=this.state.availableTimesList,t=0;case 2:if(!(t<e.length)){s.next=15;break}if("event bg-primary"!==e[t].className){s.next=12;break}return s.next=6,v.a.awrap(fetch("/Calendar/UpdateAvailableTimeJSON",{method:"POST",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded"}),body:"Calendarid="+this.state.calendarId+"&Starttime="+e[t].starttime+"&Endtime="+e[t].endtime+"&Id="+e[t].id}));case 6:return a=s.sent,s.next=9,v.a.awrap(a.json());case 9:i=s.sent,console.log(i),"success"===i.status?(e[t].id=i.data.id,e[t].className="event bg-info"):e[t].className="event bg-danger";case 12:++t,s.next=2;break;case 15:this.setState({availableTimesList:e});case 16:case"end":return s.stop()}}),null,this)}},{key:"updateAvailableTime",value:function(e,t,a,i){for(var s=this.state.dayObjectArray[e],n=!1,l=0;l<s.availableTimesList.length;++l)if(s.availableTimesList[l].id===t){n=!0,s.availableTimesList[l].className="event bg-primary",s.availableTimesList[l].starttime=s.date+" "+a+":00",s.availableTimesList[l].endtime=s.date+" "+i+":00";for(var r=s.availableTimesList[l],o=this.state.availableTimesList,c=0;c<o.length;++c)if(o[c].id===r.id)return o[c]=r,void this.setState({availableTimesList:o})}if(!1===n){console.log("found false");var d={id:-1,className:"event bg-primary"};d.date=s.date,d.starttime=s.date+" "+a+":00",d.endtime=s.date+" "+i+":00",console.log("old list: "+s.availableTimesList),console.log("availTime: "+d);var m=[].concat(Object(h.a)(s.availableTimesList),[d]);console.log("new avail list: "+m),s.availableTimesList=m;var u=this.state.dayObjectArray;u[e]=s;var v=[].concat(Object(h.a)(this.state.availableTimesList),[d]);this.setState({availableTimesList:v,dayObjectArray:u}),console.log("new length: "+this.state.dayObjectArray[e].availableTimesList.length)}}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("div",{className:"container py-5"},s.a.createElement("div",{className:"calendar shadow bg-white p-5"},s.a.createElement("h2",{className:"month font-weight-bold mb-0 text-uppercase text-center"},s.a.createElement("i",{className:"fa fa-calendar fa-1x mr-3"}),this.state.calendarDescription),s.a.createElement("h2",{id:"Month",className:"month font-weight-bold mb-0 text-uppercase text-center"},s.a.createElement("i",{className:"fa fa-chevron-left fa-1x mr-5",onClick:this.prevMonth}),g[this.state.firstDayOfMonth.getMonth()]," ",this.state.firstDayOfMonth.getFullYear(),s.a.createElement("i",{className:"fa fa-chevron-right fa-1x ml-5",onClick:this.nextMonth})),s.a.createElement("br",null),s.a.createElement("ol",{className:"day-names list-unstyled"},s.a.createElement("li",{key:"sun",className:"font-weight-bold text-uppercase"},"Sun"),s.a.createElement("li",{key:"mon",className:"font-weight-bold text-uppercase"},"Mon"),s.a.createElement("li",{key:"tue",className:"font-weight-bold text-uppercase"},"Tue"),s.a.createElement("li",{key:"wed",className:"font-weight-bold text-uppercase"},"Wed"),s.a.createElement("li",{key:"thu",className:"font-weight-bold text-uppercase"},"Thu"),s.a.createElement("li",{key:"fri",className:"font-weight-bold text-uppercase"},"Fri"),s.a.createElement("li",{key:"sat",className:"font-weight-bold text-uppercase"},"Sat")),s.a.createElement("ol",{id:"days",className:"days list-unstyled"},this.generateCalendarDisplay(),s.a.createElement("div",{className:"text-center"},s.a.createElement(y.a,{onClick:this.postAvailableTimes.bind(this),variant:"primary",size:"lg"},"Submit"))))))}}]),t}(i.Component),E=(a(40),a(41),function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return s.a.createElement(D,null)}}]),t}(i.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(s.a.createElement(E,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[31,1,2]]]);
//# sourceMappingURL=main.64c52bf1.chunk.js.map